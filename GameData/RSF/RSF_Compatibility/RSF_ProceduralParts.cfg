//
// remove size limits from Procedural tanks
//


@PART[proceduralTankLiquid|proceduralTankRealFuels]:NEEDS[LRTRTechTree]:AFTER[zLRTR]
{
        
    @MODULE[ProceduralPart]
    {
        @diameterMin = 0.1
        @diameterMax = Infinity
        @lengthMin = 0.1
        @lengthMax = Infinity
        @volumeMin = 0
        @volumeMax = Infinity
        
        -UPGRADES,* {} 
        
        UPGRADES {
            UPGRADE
            {
                name__ = lrtrpostWarMaterialsScience
                volumeMax = 15000
            }
            UPGRADE
            {
                name__ = lrtrearlyMaterialsScience
                volumeMax = 25000
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceHuman
                volumeMax = 50000
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceAdvCapsules
                volumeMax = 100000
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceLunar
                volumeMax = 200000
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceStation
                volumeMax = 400000
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceplanes
                volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralStructural]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{        
    @MODULE[ProceduralPart]
    {
 
        @diameterMin = 0.1
        @diameterMax = 1.25
        @lengthMax = Infinity
        @lengthMin = 0.1
        @volumeMin = 0
        @volumeMax = Infinity
        
         -UPGRADES,* {} 

        UPGRADES {
//            UPGRADE
//            {
//                name__ = lrtrearlyMaterialsScience
//                diameterMin = 0.1	
//                lengthMin = 0.1
//            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceHuman
                diameterMax = 1.875
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceAdvCapsules
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceLunar
                diameterMax = 3.5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceStation
                diameterMax = 5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceplanes
                diameterMax = Infinity
            }
        }
    }
}

@PART[proceduralTankOre]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{        
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {} 
        
        @diameterMin = 0.1
        @lengthMin = 0.1
        @volumeMin = 1.0
        
        UPGRADES
        {
           UPGRADE
            {
                name__ = lrtrlifeSupportISRU
                diameterMax = 1.5
                lengthMax = 1.75
                volumeMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtrimprovedLifeSupport
                diameterMax = 3.5
                lengthMax = 5.0
                volumeMax = 15.0
            }
            UPGRADE
            {
                name__ = lrtradvancedLifeSupport
			    diameterMin = 0.01
    			diameterMax = Infinity
	    		lengthMin = 0.01
		    	lengthMax = Infinity
			    volumeMin = 0.01
    			volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralTankRCS]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{        
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        @diameterMin = 0.5
        @lengthMin = 0.3
        @volumeMin = 0.11
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = lrtrmaterialsScienceAdvCapsules
                diameterMax = 2.5
                lengthMax = 2.0
                volumeMax = 5.0
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceStation
			    diameterMin = 0.01
    			diameterMax = Infinity
	    		lengthMin = 0.01
		    	lengthMax = Infinity
			    volumeMin = 0.01
    			volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralTankXenon]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{        
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        @diameterMin = 0.125
        @diameterMax = 0.75
        @lengthMin = 0.1
        @lengthMax = 0.75
        @volumeMin = 0.02
        @volumeMax = 0.2
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = lrtradvancedElecPropulsion
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.01
                lengthMax = Infinity
                volumeMin = 0.01
                volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralBattery]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{ 
    @MODULE[ProceduralShapeCone]
    {
        @techRequired = electronicsHuman
    }
    @MODULE[ProceduralShapePill]
    {
        @techRequired = electronicsAdvCapsules
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        @techRequired = electronicsAdvCapsules
    }
        
    @MODULE[ProceduralPart]
    {
        @diameterMin = 0.1
        @diameterMax = 0.625
        @lengthMax = 0.1
        @lengthMin = 0.01
        @volumeMin = 0
        @volumeMax = Infinity
        
        -UPGRADES,* {}
        
        UPGRADES {
           UPGRADE
           {
                name__ = lrtrelectronicsSatellite
                lengthMax = 0.4
            }
            UPGRADE
            {
                name__ = lrtrelectronicsHuman
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = lrtrelectronicsLunar
                diameterMax = 1.875
                lengthMax = 0.5
            }
            UPGRADE
            {
                name__ = lrtrelectronicsSpaceStation
                diameterMax = 2.5
                maxLength = 1
            }
            UPGRADE
            {
                name__ = lrtrspaceStationSolarPanels
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.01
                lengthMax = Infinity
                volumeMin = 0.001
            }
        }
    }
}

@PART[proceduralNoseCone]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{         
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = lrtrsupersonicFlightRP0
                diameterMin = 0.125
                diameterMax = 1.25
                lengthMin = 0.625
                lengthMax = 0.625
            }
            UPGRADE
            {
                name__ = lrtrhypersonicFlightRP0
                lengthMax = 1.5
            }
            UPGRADE
            {
                name__ = lrtrprototypeSpaceplanes
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtreffectiveSpaceplanes
                diameterMin = 0.01
                diameterMax = Infinity
            }
        }
    }
}

@PART[proceduralHeatshield]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
         
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = lrtrhumanRatedEDL
                diameterMin = 0.5
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = lrtrearlyLanding
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtrlunarRatedHeatshields
                diameterMax = 3.5
            }
            UPGRADE 
            {
                name__ = lrtradvancedLanding
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.1
                lengthMax = Infinity
                volumeMin = 0.01
                volumeMax = Infinity
            }
		}
    }
}

@PART[proceduralTankSRB|proceduralSRBRealFuels]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{

    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
 		
        @diameterMin = 0.5
        @diameterMax = 0.625
        @lengthMin = 1.0
        @lengthMax = 1.5
        @volumeMin = 0
 		@volumeMax = Infinity
		
 		UPGRADES
 		{
            UPGRADE
            {
                name__ = lrtrbasicSolids
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = lrtrsolids1956
                diameterMin = 0.02
                lengthMin = 0.1
            }
            UPGRADE
            {
                name__ = lrtrsolids1958
                lengthMax = 6.0
            }
            UPGRADE
            {
                name__ = lrtrsolids1962
                lengthMax = 14.0
            }
            UPGRADE
            {
                name__ = lrtrsolids1964
                diameterMax = 1.875
            }
            UPGRADE
            {
                name__ = lrtrsolids1969
                diameterMax = 2.5
            }
            UPGRADE 
            {
                name__ = lrtrsolids1972
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.1
                lengthMax = Infinity
            }
        }
    }
}

@PART[proceduralStackDecoupler]:NEEDS[LRTRTechTree]:BEFORE[zLRTR]
{
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = lrtrearlyMaterialsScience
                diameterMin = 0.5
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceHuman
                diameterMax = 1.875
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceAdvCapsules
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceAdvCapsules
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceLunar
                diameterMax = 3.5
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceStation
                diameterMax = 5.0
            }
            UPGRADE
            {
                name__ = lrtrmaterialsScienceSpaceplanes
                diameterMax = Infinity
            }
        }
    }
    MODULE[DecouplerTweaker]
    {
        @separatorTechRequired = materialsScienceHuman
    }
}

@PART[*]:HAS[@MODULE[ProceduralPart]]:NEEDS[LRTRRescale]:BEFORE[zLRTR]
{
    @MODULE[TankContentSwitcher]
    {
        @TANK_TYPE_OPTION,*
        {
            @dryDensity *= 0.8
            @RESOURCE[SolidFuel]
            {
                @unitsPerT *= 1.6
            }
            @RESOURCE[MonoPropellant]
            {
                @unitsPerT *= 0.45
            }
        }
    }
    @MODULE[ProceduralPart]
    {
        @diameterMin *= 1.6
        @diameterMax *= 1.6
        @lengthMin *= 1.6
        @lengthMax *= 1.6
        @volumeMin *= 3.6
        @volumeMax *= 3.6

        @UPGRADES
        {
            @UPGRADE,*
            {
                @diameterMin *= 1.6
                @diameterMax *= 1.6
                @lengthMin *= 1.6
                @lengthMax *= 1.6
                @volumeMin *= 3.6
                @volumeMax *= 3.6
            }
        }
        @TECHLIMIT,*
        {
            @diameterMin *= 1.6
            @diameterMax *= 1.6
            @lengthMin *= 1.6
            @lengthMax *= 1.6
            @volumeMin *= 3.6
            @volumeMax *= 3.6
        }        
    }
    @MODULE[ProceduralSRB]
    {
        @thrust1m *= 2.56
    }
}
